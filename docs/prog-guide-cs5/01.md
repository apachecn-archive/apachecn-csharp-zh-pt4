第一章

![image](img/.jpg)

C#和。NET 运行时和库

如果你正在阅读这一章，我猜你有兴趣学习更多关于 C#的知识。欢迎光临。

这本书主要是关于 C#语言的，但是在深入细节之前，理解编写 C#代码的环境的基础是很重要的。

C#编译器 将 C#程序转换成一种中间语言，这种语言只能由。NET 公共语言运行时 。面向运行时的语言 有时被称为*托管语言* [<sup>1</sup>](#Fn1) ，与不需要运行时 [<sup>2</sup>](#Fn2) 并因此直接在硬件上运行的 C++等非托管语言形成对比。 [<sup>3</sup>](#Fn3)

那个。NET 运行库管理内存分配、安全性、类型安全、异常处理和许多其他底层问题。有几种不同的。NET 运行时，运行在从多处理器服务器到智能手机到微控制器的所有设备上。

为了执行有用的任务，C#代码将使用。NET 基础类库(BCL) 。BCL 包含可能对许多程序有用的类，并包括对以下内容的支持:

*   执行网络操作
*   执行 I/O 操作
*   管理安全性
*   全球化项目 [<sup>4</sup>](#Fn4)
*   操纵文本
*   访问数据库
*   操作 XML
*   与事件日志记录、跟踪和其他诊断操作交互
*   使用非托管代码
*   动态创建和调用代码

BCL 足够大，很容易混淆；各种能力被组织成*名称空间* 。例如，`System.Globalization`名称空间用于帮助全球化，`System.XML`名称空间用于操作 XML，等等。

位于 BCL 之上的是专用库 ，旨在创建特定类型的应用或服务，包括:

*   控制台应用
*   使用 Windows 窗体或 Windows Presentation Foundation(WPF)的 Windows GUI 应用
*   ASP.NET(网络)应用
*   Windows 服务
*   面向服务的应用，使用 Windows 通信基础(WCF)
*   启用工作流的应用，Windows Workflow Foundation (WF)
*   Windows 8 应用
*   Windows Phone 应用

基类库和所有其他库统称为。NET 框架 。

托管与非托管代码

如果您习惯于编写非托管代码，那么编写 C#代码可能会有点令人不安。运行时管理一些以前由您自己控制的事情，这确实降低了您的灵活性。在您探索了。NET 框架，我想你会发现，在绝大多数情况下，你可以用 C#写得更快，质量更高。

[<sup>1</sup>](#_Fn1) Java 是另一种托管语言；它使用 Java 虚拟机(JVM)运行，Visual Basic 当然是另一种在 CLR 上运行的语言。

令人困惑的是，C 和 C++使用 C 运行时，C 运行时是库的集合，而不是像。NET 运行时。

[<sup>3</sup>](#_Fn3)Microsoft Visual c++既可以作为托管语言使用，也可以作为非托管语言使用(或者兼而有之)。

[<sup>4</sup>](#_Fn4) 全球化帮助开发者编写可以在世界不同地区使用的应用。它帮助应用支持多种语言、不同的日期和数字格式等等。